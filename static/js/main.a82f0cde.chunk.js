(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{210:function(e,t,a){e.exports=a(341)},254:function(e,t){},256:function(e,t){},292:function(e,t){},293:function(e,t){},341:function(e,t,a){"use strict";a.r(t);a(211),a(236);var n=a(0),i=a.n(n),r=a(38),s=a.n(r),c=a(27),o=a.n(c),l=a(15),u=a(16),d=a(23),m=a(22),h=a(24),p=a(3),f=(a(250),a(14)),g=a(166),k=a.n(g),E=a(167),v=a.n(E),b=a(168),y=a.n(b),S=a(70),C=a.n(S),O=a(169),j=a.n(O),P=a(59),w=a.n(P),_=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(d.a)(this,Object(m.a)(t).call(this))).state={fetchedUser:null},e}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;w.a.subscribe(function(t){switch(t.detail.type){case"VKWebAppGetUserInfoResult":e.setState({fetchedUser:t.detail.data});break;default:console.log(t.detail.type)}}),w.a.send("VKWebAppGetUserInfo",{})}},{key:"render",value:function(){return console.log(localStorage.getItem("mapState")),i.a.createElement("div",null,i.a.createElement(p.t,null,"Settings"),this.state.fetchedUser&&i.a.createElement(p.i,{title:"User Data Fetched with VK Connect"},i.a.createElement(p.n,{before:this.state.fetchedUser.photo_200?i.a.createElement(p.b,{src:this.state.fetchedUser.photo_200}):null,description:this.state.fetchedUser.city&&this.state.fetchedUser.city.title?this.state.fetchedUser.city.title:""},"".concat(this.state.fetchedUser.first_name," ").concat(this.state.fetchedUser.last_name))),i.a.createElement(p.i,null,i.a.createElement(p.e,{onClick:console.log("tap"),"data-to":"tinder"},"Tinder"),i.a.createElement(p.e,{onClick:console.log("tap"),"data-to":"tinder"},"Tinder")))}}]),t}(i.a.Component),M=a(50),I=a(41),A=a.n(I),T=a(35),R=a.n(T),x=a(34),D=a.n(x),B=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(d.a)(this,Object(m.a)(t).call(this))).onRefresh=function(){e.setState({fetching:!0}),e.getBag()},e.getBag=function(){fetch("/api/v1/cart/view",{method:"GET",headers:{"Povysh-Token":localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){var a=0;console.log(t),t.map(function(e){a+=e.menu_item.price}),console.log(a),e.setState({items:t,price:a,fetching:!1})})},e.pay=function(){w.a.send("VKWebAppOpenPayForm",{app_id:7150406,action:"pay-to-service",params:{}}),fetch("/api/v1/cart/complete",{method:"GET",headers:{"Povysh-Token":localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){var a=t.tracking;console.log(t),e.props.trackingOrder(a)})},e.state={items:[],price:0,fetching:!1},e.getBag=e.getBag.bind(Object(f.a)(Object(f.a)(e))),e.onRefresh=e.onRefresh.bind(Object(f.a)(Object(f.a)(e))),e}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.getBag()}},{key:"render",value:function(){return i.a.createElement(p.E,{id:this.props.id,activePanel:"mainBag"},i.a.createElement(p.s,{id:"mainBag"},i.a.createElement(p.u,{onRefresh:this.onRefresh,isFetching:this.state.fetching},i.a.createElement(p.t,{left:i.a.createElement(p.j,{onClick:this.props.back},Object(p.F)()===p.l?i.a.createElement(A.a,null):i.a.createElement(R.a,null))},"Bag"),i.a.createElement(p.m,null,this.state.items&&this.state.items.length>0&&this.state.items.map(function(e,t){return i.a.createElement(p.d,{before:i.a.createElement(p.b,{size:64,src:""+e.menu_item.photo_url}),description:e.menu_item.description},e.menu_item.name)})),i.a.createElement(p.g,{vertical:"bottom"},i.a.createElement(p.C,null,i.a.createElement(p.D,{onClick:this.pay},"\u041e\u043f\u043b\u0430\u0442\u0438\u0442\u044c: "+String(this.state.price)+" \u0440\u0443\u0431"))))))}}]),t}(i.a.Component),G=(a(251),function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(d.a)(this,Object(m.a)(t).call(this))).getRestsID=function(){for(var t=String(e.props.restsID[0]),a=1;a<e.props.restsID.length;a++)t+=","+String(e.props.restsID[a]);return t},e.addToCart=function(t){var a=t.id,n=t.name;fetch("/api/v1/cart/push?menu_item_id="+String(a),{method:"GET",headers:{"Povysh-Token":localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){t.is_saved&&e.openBase(n)})},e.openBase=function(t){e.state.snackbar||e.setState({snackbar:i.a.createElement(p.y,{layout:"vertical",onClose:function(){return e.setState({snackbar:null})},before:i.a.createElement(p.b,{size:24},i.a.createElement(D.a,{fill:"#fff",width:14,height:14}))},t+" \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443")})},e.clearBag=function(){fetch("/api/v1/cart/clean",{method:"GET",headers:{"Povysh-Token":localStorage.getItem("token")}}),e.setState({bag:!1})},e.state={activePanel:"mainMenu",categories:[],items:[],currentCategory:-1,snackbar:null,bag:!1},e.openBase=e.openBase.bind(Object(f.a)(Object(f.a)(e))),e}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("/api/v1/places/food?restaurant_id="+this.getRestsID(),{method:"GET",headers:{"Povysh-Token":localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){try{e.setState({items:t});var a=[],n=[];e.state.items.map(function(e){console.log(e.menu_category),-1===n.indexOf(e.menu_category.id)&&(a.push(e.menu_category),n.push(e.menu_category.id))}),e.setState({categories:a}),e.state.categories&&e.state.categories.length>0&&e.setState({currentCategory:e.state.categories[0].id})}catch(i){}}),fetch("/api/v1/cart/view",{method:"GET",headers:{"Povysh-Token":localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){t.length>0&&-1===e.props.restsID.indexOf(t[0].menu_item.restaraunt_id)&&e.setState({bag:!0})})}},{key:"render",value:function(){var e=this;return this.state.bag?i.a.createElement(p.s,{id:"mainError"},i.a.createElement("div",{style:{height:"50px"}}),i.a.createElement("p",null,"\u0423 \u0432\u0430\u0441 \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0435 \u0447\u0442\u043e-\u0442\u043e \u0435\u0441\u0442\u044c, \u043e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0435\u0451 \u0438 \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c?"),i.a.createElement(p.c,{onClick:this.clearBag,size:"xl"},"\u0414\u0430"),i.a.createElement("p",null),i.a.createElement(p.c,{onClick:function(){return e.setState({bag:!1,activePanel:"bag"})},size:"xl"},"\u041d\u0435\u0442, \u043f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443")):"bag"===this.state.activePanel?i.a.createElement(B,{id:this.props.id,trackingOrder:this.props.trackingOrder,back:function(){return e.setState({activePanel:"mainMenu"})}}):i.a.createElement(p.E,{id:this.props.id,activePanel:this.state.activePanel},i.a.createElement(p.s,{id:"mainMenu"},i.a.createElement(p.t,{left:i.a.createElement(p.j,{onClick:this.props.back},Object(p.F)()===p.l?i.a.createElement(A.a,null):i.a.createElement(R.a,null))},"Menu"),i.a.createElement(p.C,{type:"buttons"},i.a.createElement(p.k,null,this.state.categories.length>0&&this.state.categories.map(function(t,a){return i.a.createElement(p.D,{key:a,onClick:function(){return e.setState({currentCategory:t.id})},selected:e.state.currentCategory===t.id,style:{marginLeft:"10px"}},t.name)}))),i.a.createElement(p.m,null,this.state.items&&this.state.items.length>0&&this.state.items.map(function(t,a){return t.menu_category.id!==e.state.currentCategory?null:i.a.createElement(p.d,{before:i.a.createElement(p.b,{src:""+t.photo_url}),description:t.description,asideContent:i.a.createElement(p.c,{onClick:function(){e.addToCart({id:t.id,name:t.name})},style:{width:"80px"}},String(t.price)+" \u0440\u0443\u0431")},t.name)})),i.a.createElement(p.g,{vertical:"bottom"},i.a.createElement(p.C,null,i.a.createElement(p.D,{onClick:function(){e.setState({activePanel:"bag"})}},"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043a \u043a\u043e\u0440\u0437\u0438\u043d\u0435"))),this.state.snackbar))}}]),t}(i.a.Component)),z=(a(335),function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(d.a)(this,Object(m.a)(t).call(this))).updateArrray=function(){var t=[];e.props.rests.map(function(){t.push(!1)}),e.setState({checked:t})},e.state={checked:[],activePanel:"mainSelectRest",restsID:[]},e.updateArrray=e.updateArrray.bind(Object(f.a)(Object(f.a)(e))),e}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=[];this.props.rests.map(function(){e.push(!1)}),this.setState({checked:e})}},{key:"render",value:function(){var e=this;return"menu"===this.state.activePanel?i.a.createElement(G,{id:this.props.id,trackingOrder:this.props.trackingOrder,restsID:this.state.restsID,back:function(){e.setState({activePanel:"mainSelectRest"}),e.updateArrray()}}):i.a.createElement(p.E,{id:this.props.id,activePanel:"mainSelectRest"},i.a.createElement(p.s,{id:"mainSelectRest"},i.a.createElement(p.t,{left:i.a.createElement(p.j,{onClick:this.props.back},Object(p.F)()===p.l?i.a.createElement(A.a,null):i.a.createElement(R.a,null))},"Select Rest"),i.a.createElement(p.m,null,this.props.rests.map(function(t,a){return i.a.createElement(p.d,{selectable:!0,onClick:function(){var t=e.state.checked;t[a]=!t[a],e.setState({checked:t})}},t.name)})),i.a.createElement(p.g,{vertical:"bottom"},i.a.createElement(p.c,{size:"xl",onClick:function(){var t=[];e.state.checked.map(function(a,n){a&&t.push(e.props.rests[n].id)}),e.setState({restsID:t,activePanel:"menu"})}},"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c"))))}}]),t}(i.a.Component)),L=a(170),K=a.n(L),U=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).restaurants=[{coord:[55.7,37.6],code:0,id:12345},{coord:[55.7,37.61],code:1,id:82936},{coord:[55.7,37.62],code:2,id:12761},{coord:[55.5,37.6],code:0,id:18235},{coord:[55.8,37.31],code:1,id:11813},{coord:[55.5,36.92],code:2,id:16381},{coord:[55.9,35.6],code:0,id:12936}],a.map=null,a.rest=[{name:"Macdonalds",id:0,url:"https://www.pinclipart.com/picdir/middle/113-1137531_mcdonalds-logo-transparent-png-mcdonalds-logo-png-clipart.png"},{name:"KFC",id:1,url:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRjI-yxfVTMbNT6ogrdOVoKeaL3UG5zbtgWLWPZqtBs8yGJbWx9"},{name:"BurgerKing",id:2,url:"https://cdn.imgbin.com/12/7/6/imgbin-hamburger-whopper-french-fries-burger-king-chicken-sandwich-burger-king-kGm4a8Unj0yht3gTpGYpkHedg.jpg"}],a.foodCourts=[{coord:[56,37.6],restaurants:[0,1,2],id:1243},{coord:[56.2,37.6],restaurants:[0,1,2],id:4357}],a.onBoundsChange=function(){try{a.setState({map:{center:a.map.getCenter(),zoom:a.map.getZoom()}})}catch(e){}},a.onKeyPressed=function(e){console.log(e),"Enter"===e.key&&"block"===a.state.displayList&&(console.log("hi"),a.setState({displayMap:"block",displayList:"none"}))},a.getIdRestsOnFoodCourt=function(e){var t=[];return a.state.foodCourts.map(function(a){a.id===e&&a.restaraunts.map(function(e){t.push(e.id)})}),t},a.state={activePanel:"map",restaurants:a.restaurants,map:{center:[56,37.6],zoom:14},id:e.id,mode:"all",contextOpened:!1,switchRest:[!0,!0,!0],rest:a.rest,foodCourts:[],go:a.props.go,modals:{activeModal:null,modalHistory:[],data:{type:null,id:null,title:null,rests:[]}},search:"",displayMap:"block",displayList:"none",restrictMapArea:[[0,0],[60,60]],rests:[],filters:[],cuisine:[{id:1,checked:!0},{id:2,checked:!0},{id:3,checked:!0}],price_tag:[!0,!0,!0,!0]},a.switchClick=a.switchClick.bind(Object(f.a)(Object(f.a)(a))),a.openModal=a.openModal.bind(Object(f.a)(Object(f.a)(a))),a.modalBack=function(){a.setActiveModal(a.state.modals.modalHistory[a.state.modals.modalHistory.length-2])},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("mapState");console.log(t);var a=[59.9339453,30.302315699999994];if(o.a.sendPromise("VKWebAppGetGeodata").then(function(t){console.log(t),a=[t.lat,t.long],e.setState({map:{center:a,zoom:"13"}})}),null!==t){var n=(i=JSON.parse(t)).switchRest;null===i.map?(console.log(n),i={map:{center:a,switchRest:n}},this.setState(i)):this.setState(i)}else{console.log("elese");var i={map:{center:a,zoom:14}};this.setState(i)}console.log(localStorage.getItem("token")),fetch("/api/v1/utilities/bounds?lat="+String(a[0])+"&lon="+String(a[1]),{method:"GET",headers:{"Povysh-Token":localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){try{var a=t.bounds;e.setState({restrictMapArea:[[a[0],a[1]],[a[2],a[3]]]})}catch(n){}}),fetch("/api/v1/places/around?lat="+String(a[0])+"&lon="+String(a[1])+"&radius=10",{method:"GET",headers:{"Povysh-Token":localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){try{var a=t;e.setState({rests:a})}catch(n){}}),fetch("/api/v1/utilities/filters",{method:"GET",headers:{"Povysh-Token":localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){try{e.setState({filters:t})}catch(a){}}),fetch("/api/v1/places/footcourts_around?lat="+String(a[0])+"&lon="+String(a[1])+"&radius=10",{method:"GET",headers:{"Povysh-Token":localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){try{e.setState({foodCourts:t})}catch(a){}})}},{key:"componentDidUpdate",value:function(){var e={map:this.state.map,switchRest:this.state.switchRest};localStorage.setItem("mapState",JSON.stringify(e))}},{key:"switchClick",value:function(e){var t=Number(e.currentTarget.dataset.mode),a=this.state.switchRest;a[t]=!a[t],this.setState({switchRest:a}),console.log(this.state)}},{key:"openModal",value:function(e){console.log(e),this.setState({modals:{data:e,activeModal:e.type}})}},{key:"setActiveModal",value:function(e){e=e||null,this.setState({modals:{activeModal:e,data:this.state.modals.data}})}},{key:"render",value:function(){var e=this;console.log(this.state);var t=i.a.createElement(p.r,{activeModal:this.state.modals.activeModal},i.a.createElement(p.o,{id:"restModalCard",onClose:function(){return e.setActiveModal(null)},title:this.state.modals.data.title,caption:String(this.state.modals.data.address),actions:[{title:"\u041c\u0435\u043d\u044e",type:"primary",action:function(){e.setActiveModal(null),e.setState({activePanel:"menu"})}}]},i.a.createElement("p",null,this.state.modals.data.description)),i.a.createElement(p.o,{id:"foodcourtModalCard",onClose:function(){return e.setActiveModal(null)},title:this.state.modals.data.title,caption:String(this.state.modals.data.address),actions:[{title:"\u041c\u0435\u043d\u044e",type:"primary",action:function(){e.setActiveModal(null),e.setState({activePanel:"selectRest"})}}]},i.a.createElement("p",null,this.state.modals.data.description)),i.a.createElement(p.p,{id:"filter",onClose:function(){return e.setActiveModal(null)},header:i.a.createElement(p.q,{right:i.a.createElement(p.j,{onClick:function(){return e.setActiveModal(null)}},Object(p.F)()===p.l?"\u0413\u043e\u0442\u043e\u0432\u043e":i.a.createElement(K.a,null))},"\u0424\u0438\u043b\u044c\u0442\u0440\u044b")},this.state.filters&&this.state.filters.cuisine&&i.a.createElement(p.i,{title:"\u041a\u0443\u0445\u043d\u044f"},i.a.createElement(p.m,null,this.state.filters.cuisine.items&&this.state.filters.cuisine.items.length>0&&this.state.filters.cuisine.items.map(function(t,a){return e.state.cuisine[t.id-1].checked?i.a.createElement(p.d,{key:a,defaultChecked:!0,asideContent:i.a.createElement(p.z,{defaultChecked:!0,onClick:function(){var a=e.state.cuisine;a[t.id-1].checked=!a[t.id-1].checked,e.setState({cuisine:a})}})},t.name):i.a.createElement(p.d,{key:a,asideContent:i.a.createElement(p.z,{onClick:function(){var a=e.state.cuisine;a[t.id-1].checked=!a[t.id-1].checked,e.setState({cuisine:a})}})},t.name)}))),this.state.filters&&this.state.filters.price_tag&&i.a.createElement(p.i,{title:"\u0426\u0435\u043d\u043e\u0432\u043e\u0439 \u0434\u0438\u0430\u043f\u0430\u0437\u043e\u043d"},i.a.createElement(p.m,null,this.state.filters.price_tag.items&&this.state.filters.price_tag.items.length>0&&this.state.filters.price_tag.items.map(function(t,a){return e.state.price_tag[a]?i.a.createElement(p.d,{key:a,defaultChecked:!0,asideContent:i.a.createElement(p.z,{defaultChecked:!0,onClick:function(){var t=e.state.price_tag;t[a]=!t[a],e.setState({price_tag:t})}})},String(t[0])+"-"+String(t[1])):i.a.createElement(p.d,{key:a,asideContent:i.a.createElement(p.z,{onClick:function(){var t=e.state.price_tag;t[a]=!t[a],e.setState({price_tag:t})}})},String(t[0])+"-"+String(t[1]))})))));return"menu"===this.state.activePanel?i.a.createElement(G,{id:"menu",trackingOrder:this.props.trackingOrder,restsID:[this.state.modals.data.id],back:function(){return e.setState({activePanel:"map"})}}):"selectRest"===this.state.activePanel?i.a.createElement(z,{id:"selectRest",trackingOrder:this.props.trackingOrder,foodCourtID:this.state.modals.data.id,rests:this.state.modals.data.rests,back:function(){return e.setState({activePanel:"map"})}}):i.a.createElement(p.E,{header:Object(p.F)()===p.l,activePanel:this.state.activePanel,modal:t},i.a.createElement(p.s,{id:"map",style:{overflow:"hidden"}},Object(p.F)()===p.l&&i.a.createElement(p.t,null,i.a.createElement(p.w,{id:"search",theme:"header",value:this.state.search,onChange:function(t){return e.setState({search:t})},onFocus:function(){return e.setState({displayMap:"none",displayList:"block"})},onBlur:function(){return e.setState({displayMap:"block",displayList:"none"})},onKeyDown:this.onKeyPressed,tabIndex:"0"})),Object(p.F)()!==p.l&&i.a.createElement(p.w,{id:"search",value:this.state.search,onChange:function(t){return e.setState({search:t})},onFocus:function(){return e.setState({displayMap:"none",displayList:"block"})},onBlur:function(){return e.setState({displayMap:"block",displayList:"none"})},onKeyDown:this.onKeyPressed,tabIndex:"0"}),i.a.createElement("div",{style:{display:this.state.displayList}},i.a.createElement(p.m,null,this.state.rests&&this.state.rests.length>0&&this.state.rests.map(function(t,a){var n=t.name.toLowerCase(),r=e.state.search.toLowerCase();return-1===n.indexOf(r)?null:i.a.createElement(p.d,{key:a,expandable:!0,onClick:function(){console.log(t.latitude),console.log(t.longitude),e.setState({map:{center:[t.latitude,t.longitude],zoom:14}})}},t.name)}))),i.a.createElement("div",null,i.a.createElement(M.d,null,i.a.createElement(M.b,{height:"100vh",width:"100%",state:{center:this.state.map.center,zoom:this.state.map.zoom},options:{restrictMapArea:this.state.restrictMapArea},instanceRef:function(t){return e.map=t},onBoundsChange:this.onBoundsChange},i.a.createElement(M.a,{options:{preset:"islands#invertedVioletClusterIcons"}},this.state.rests&&this.state.rests.length>0&&this.state.rests.map(function(t,a){return e.state.cuisine[t.cuisine.id-1].checked&&e.state.price_tag[t.price_rating]?-1===t.name.indexOf(e.state.search)?null:i.a.createElement(M.c,{key:a,onClick:function(){e.openModal({type:"restModalCard",title:t.name,id:t.id,address:t.address,description:t.description,rests:[]})},geometry:[t.latitude,t.longitude],properties:{iconContent:t.name[0]},options:{preset:"islands#orangeIcon"}}):null}),this.state.foodCourts&&this.state.foodCourts.length>0&&this.state.foodCourts.map(function(t,a){return i.a.createElement(M.c,{key:a,onClick:function(){e.openModal({type:"foodcourtModalCard",title:t.name,id:t.id,address:t.address,description:t.description,rests:t.restaraunts})},geometry:[t.latitude,t.longitude],properties:{iconContent:t.restaraunts.length},options:{preset:"islands#orangeIcon"}})})))),i.a.createElement("div",{style:{position:"fixed",bottom:"50px",right:"10px"}},i.a.createElement("img",{src:"http://about-telegram.ru/wp-content/uploads/2018/03/kot-persik-stickers-telegram_21.png",style:{height:"75px"},onClick:function(){return e.setActiveModal("filter")}})))))}}]),t}(i.a.Component),F=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(d.a)(this,Object(m.a)(t).call(this))).state={activeModal:"modalRoot",fisrt:!0,sex:"m"},e}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return this.state.fisrt?i.a.createElement(p.E,{id:this.props.id,activePanel:"mainFirst"},i.a.createElement(p.s,{id:"mainFirst"},i.a.createElement(p.t,null,"\u0424\u0443\u0434-\u0434\u0435\u0439\u0442\u0438\u043d\u0433"),i.a.createElement("p",null,"\u041d\u0430\u0439\u0434\u0438\u0442\u0435 \u0441\u0435\u0431\u0435 \u0447\u0435\u043b\u043e\u0432\u0435\u043a\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0440\u0430\u0437\u0434\u0435\u043b\u044f\u0435\u0442 \u0432\u0430\u0448\u0438 \u043f\u0440\u0435\u0434\u043f\u043e\u0447\u0442\u0435\u043d\u0438\u044f \u0432 \u0435\u0434\u0435."),i.a.createElement("p",null,"\u041f\u0440\u043e\u0432\u043e\u0434\u0438\u0442\u0435 \u0432\u043c\u0435\u0441\u0442\u0435 \u0432\u0440\u0435\u043c\u044f \u0437\u0430 \u043b\u044e\u0431\u0438\u043c\u044b\u043c\u0438 \u0431\u043b\u044e\u0434\u0430\u043c\u0438."),i.a.createElement("p",null,"\u042f \u0445\u043e\u0447\u0443 \u043d\u0430\u0439\u0442\u0438 \u0441\u0435\u0431\u0435"),i.a.createElement(p.x,null,i.a.createElement("option",{value:"m"},"\u041f\u0430\u0440\u043d\u044f"),i.a.createElement("option",{value:"f"},"\u0414\u0435\u0432\u0443\u0448\u043a\u0443")),this.state.sex)):i.a.createElement(p.E,{id:this.props.id,activePanel:"tinderRoot"},i.a.createElement(p.s,{id:"tinderRoot"},i.a.createElement(p.t,null,"Tinder"),i.a.createElement("div",{style:{height:"calc(100vh - 100x)",width:"100%"}},i.a.createElement("img",{style:{height:"100%",marginLeft:"auto",marginRight:"auto"},src:"https://ditp.ifmo.ru/images/a50b8bf8381b19bc7977ce6cc853fa00.jpg"})),i.a.createElement(p.g,{vertical:"bottom"},i.a.createElement(p.d,{before:i.a.createElement(p.b,{size:60},i.a.createElement(D.a,{fill:"#fff",width:28,height:28})),asideContent:i.a.createElement(p.b,{size:60},i.a.createElement(C.a,{fill:"#fff",width:28,height:28}))}))))}}]),t}(i.a.Component),V=a(97),W=a.n(V),q=a(171),N=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(d.a)(this,Object(m.a)(t).call(this))).state={activePanel:"mainorder",count:0,coord:""},e.tarcking=e.tarcking.bind(Object(f.a)(Object(f.a)(e))),e}return Object(h.a)(t,e),Object(u.a)(t,[{key:"tarcking",value:function(){var e=Object(q.a)(W.a.mark(function e(){return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.tarcking()}},{key:"render",value:function(){return console.log("order"),i.a.createElement(p.E,{id:this.props.id,activePanel:"mainorder"},i.a.createElement(p.s,{id:"mainorder"},i.a.createElement(p.t,null,"Test"),this.state.count,this.state.coord))}}]),t}(i.a.Component),H=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).flag_name=!0,a.viewChange=function(e){a.setState({activeStory:e})},a.trackingOrder=function(e){console.log(e),a.setState({orderID:e,activeStory:"myorder"})},a.state={id:e.id,activeStory:"map",activePanel:"epic",idRest:null},a.onStoryChange=a.onStoryChange.bind(Object(f.a)(Object(f.a)(a))),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"onStoryChange",value:function(e){this.setState({activeStory:e.currentTarget.dataset.story})}},{key:"render",value:function(){return i.a.createElement(p.f,{id:"epic",activeStory:this.state.activeStory,tabbar:i.a.createElement(p.A,null,i.a.createElement(p.B,{key:"map",onClick:this.onStoryChange,selected:"map"===this.state.activeStory,"data-story":"map",text:this.flag_name?"Map":null},i.a.createElement(k.a,null)),i.a.createElement(p.B,{key:"quick",onClick:this.onStoryChange,selected:"quick"===this.state.activeStory,"data-story":"quick",text:this.flag_name?"Quick":null},i.a.createElement(v.a,null)," "),i.a.createElement(p.B,{key:"tinder",onClick:this.onStoryChange,selected:"tinder"===this.state.activeStory,"data-story":"tinder",text:this.flag_name?"Tinder":null},i.a.createElement(C.a,null)," "),i.a.createElement(p.B,{key:"myorder",onClick:this.onStoryChange,selected:"myorder"===this.state.activeStory,"data-story":"myorder",text:this.flag_name?"Order":null},i.a.createElement(j.a,null)),i.a.createElement(p.B,{key:"settings",onClick:this.onStoryChange,selected:"settings"===this.state.activeStory,"data-story":"settings",text:this.flag_name?"Settings":null},i.a.createElement(y.a,null)," "))},i.a.createElement(U,{id:"map",viewChange:this.viewChange,trackingOrder:this.trackingOrder}),i.a.createElement(p.E,{id:"quick",activePanel:"quick"},i.a.createElement(p.s,{id:"quick"},i.a.createElement(p.t,null,"Quick"),"Quick")),i.a.createElement(F,{id:"tinder"}),i.a.createElement(N,{id:"myorder",orderID:this.state.orderID}),i.a.createElement(p.E,{id:"settings",activePanel:"settings"},i.a.createElement(p.s,{id:"settings"},i.a.createElement(_,null))))}}]),t}(i.a.Component),J=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(d.a)(this,Object(m.a)(t).call(this))).state={},e}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement(p.E,{header:!1,activePanel:"main"},i.a.createElement(p.s,{id:"main"},i.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},i.a.createElement("div",{style:{height:"200px",width:"100%",display:"block"}},i.a.createElement(p.h,{slideWidth:"100%",style:{height:"100%",width:"100%"},bullets:"dark"},i.a.createElement("div",null,"Hello"),i.a.createElement("div",null,"Hi"),i.a.createElement("div",null,"H")))),i.a.createElement(p.g,{vertical:"bottom"},i.a.createElement(p.C,null,i.a.createElement(p.D,{onClick:this.props.closeThis},"\u041d\u0430\u0447\u0430\u0442\u044c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c")))))}}]),t}(i.a.Component),Q=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).allertPopout=function(){return a.setState({errorAuth:!0}),i.a.createElement(p.a,{actions:[{title:"Ok",autoclose:!0,style:"default"}],onClose:a.closePopout},i.a.createElement("h2",null,"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438"),i.a.createElement("h2",null,"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u043e\u043f\u044b\u0442\u043a\u0443 \u043f\u043e\u0437\u0436\u0435"))},a.closePopout=function(){console.log("test"),a.setState({popout:i.a.createElement(p.v,null)})},a.state={activePanel:"black",fetchedUser:null,token:null,mytoken:null,popout:i.a.createElement(p.v,null),test:"fail",firstLogin:!1,errorAuth:!1,blackPanel:!0},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"tryGet",value:function(e){var t=this;fetch("/api/v1/users/from_vk_token?token="+e,{method:"GET"}).then(function(e){return e.json()}).then(function(a){localStorage.setItem("token",a.token),t.setState({token:e,mytoken:a.token,activePanel:"start",popout:null,errorAuth:!1,blackPanel:!1,firstLogin:a.is_new})})}},{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("mapState");null!==t&&(t={switchRest:(t=JSON.parse(t)).switchRest,map:null},localStorage.setItem("mapState",JSON.stringify(t))),o.a.send("VKWebAppGetAuthToken",{app_id:7150406,scope:""});var a=null;o.a.subscribe(function(t){switch(t.detail.type){case"VKWebAppAccessTokenReceived":a=t.detail.data.access_token,e.tryGet(a),setTimeout(function(){"start"!==e.state.activePanel&&e.setState({errorAuth:!0})},5e4);break;case"VKWebAppAccessTokenFailed":console.log("error connect Vk"),e.setState({errorAuth:!0})}})}},{key:"render",value:function(){var e=this;console.log(this.state);try{return this.state.errorAuth?(console.log("errorAuth"),i.a.createElement(p.E,{header:!1,activePanel:"error"},i.a.createElement(p.s,{id:"error"},"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438"))):this.state.firstLogin?(console.log("firstLogin"),i.a.createElement(J,{closeThis:function(){return e.setState({firstLogin:!1})}})):this.state.blackPanel?i.a.createElement(p.s,{id:"black",popout:i.a.createElement(p.v,null)},i.a.createElement("p",null,"[sdifisodfsdif")):i.a.createElement(H,{id:"start"})}catch(t){return i.a.createElement(p.E,{activePanel:"bug"},i.a.createElement(p.s,{id:"bug"},"\u042d\u0442\u043e \u043d\u0435 \u0431\u0430\u0433, \u044d\u0442\u043e \u0444\u0438\u0447\u0430"))}}}]),t}(i.a.Component);o.a.subscribe(function(e){switch(e.detail.type){case"VKWebAppUpdateConfig":var t=document.createAttribute("scheme");t.value=e.detail.data.scheme?e.detail.data.scheme:"client_light",t.value="client_dark",document.body.attributes.setNamedItem(t)}}),o.a.sendPromise("VKWebAppInit").then(function(e){return console.log(e)}).catch(function(e){return console.log(e)}),s.a.render(i.a.createElement(Q,null),document.getElementById("root"))}},[[210,1,2]]]);
//# sourceMappingURL=main.a82f0cde.chunk.js.map