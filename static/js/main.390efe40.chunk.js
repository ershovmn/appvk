(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{210:function(e,t,a){e.exports=a(341)},255:function(e,t){},257:function(e,t){},293:function(e,t){},294:function(e,t){},341:function(e,t,a){"use strict";a.r(t);a(211),a(236);var n=a(0),r=a.n(n),i=a(39),s=a.n(i),o=a(26),c=a.n(o),l=a(15),u=a(16),d=a(18),h=a(17),m=a(19),p=a(3),g=(a(250),a(14)),f=a(168),k=a.n(f),v=a(169),E=a.n(v),b=(a(251),a(69)),y=a.n(b),S=a(170),C=a.n(S),O=a(70),j=a.n(O),P=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(d.a)(this,Object(h.a)(t).call(this))).state={fetchedUser:null},e}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;j.a.subscribe(function(t){switch(t.detail.type){case"VKWebAppGetUserInfoResult":e.setState({fetchedUser:t.detail.data});break;default:console.log(t.detail.type)}}),j.a.send("VKWebAppGetUserInfo",{})}},{key:"render",value:function(){return console.log(localStorage.getItem("mapState")),r.a.createElement("div",null,r.a.createElement(p.u,null,"Settings"),this.state.fetchedUser&&r.a.createElement(p.i,{title:"User Data Fetched with VK Connect"},r.a.createElement(p.o,{before:this.state.fetchedUser.photo_200?r.a.createElement(p.b,{src:this.state.fetchedUser.photo_200}):null,description:this.state.fetchedUser.city&&this.state.fetchedUser.city.title?this.state.fetchedUser.city.title:""},"".concat(this.state.fetchedUser.first_name," ").concat(this.state.fetchedUser.last_name))),r.a.createElement(p.i,null,r.a.createElement(p.e,{onClick:console.log("tap"),"data-to":"tinder"},"Tinder"),r.a.createElement(p.e,{onClick:console.log("tap"),"data-to":"tinder"},"Tinder")))}}]),t}(r.a.Component),_=a(50),I=a(33),T=a.n(I),M=a(30),w=a.n(M),D=a(38),G=a.n(D),A=a(71),x=a.n(A),R="https://170e4f1c.ngrok.io",B=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(d.a)(this,Object(h.a)(t).call(this))).onRefresh=function(){e.setState({fetching:!0}),e.getBag()},e.getBag=function(){fetch(R+"/api/v1/cart/view",{method:"GET",headers:{"Povysh-Token":localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){var a=0;console.log(t),t.map(function(e){a+=e.menu_item.price}),console.log(a),e.setState({items:t,price:a,fetching:!1})})},e.pay=function(){fetch(R+"/api/v1/cart/complete",{method:"GET",headers:{"Povysh-Token":localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){t.tracking;console.log(t),e.setState({orderID:t[0].tracking,activeModal:"orderDetail"})})},e.state={items:[],price:0,fetching:!1,activeModal:null,orderID:null,mode:0},e.getBag=e.getBag.bind(Object(g.a)(Object(g.a)(e))),e.onRefresh=e.onRefresh.bind(Object(g.a)(Object(g.a)(e))),e}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.getBag()}},{key:"render",value:function(){var e=this;return r.a.createElement(p.F,{id:this.props.id,activePanel:"mainBag",modal:r.a.createElement(p.s,{activeModal:this.state.activeModal},r.a.createElement(p.p,{id:"orderDetail",onClose:function(){return e.setState({activeModal:null})},title:"\u0417\u0430\u043a\u0430\u0437 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f",caption:"\u043d\u043e\u043c\u0435\u0440 \u0432\u0430\u0448\u0435\u0433\u043e \u0437\u0430\u043a\u0430\u0437\u0430",actions:[{title:"Ok",type:"primary",action:function(){e.setState({activeModal:null})}}]},r.a.createElement("div",{style:{marginRight:"auto",marginLeft:"auto"}},this.state.orderID)),r.a.createElement(p.q,{id:"editDetailOrder",onClose:function(){return e.setState({activeModal:null})},header:r.a.createElement(p.r,{right:r.a.createElement(p.j,{onClick:function(){return e.setState({activeModal:null})}},Object(p.G)()===p.l?"\u0413\u043e\u0442\u043e\u0432\u043e":r.a.createElement(x.a,null))},"\u0414\u0435\u0442\u0430\u043b\u0438 \u0437\u0430\u043a\u0430\u0437\u0430")},r.a.createElement(p.y,{onChange:function(t){return e.setState({mode:t.target.value})}},r.a.createElement("option",{value:"0"},"\u041e\u0431\u044b\u0447\u043d\u044b\u0439 \u0437\u0430\u043a\u0430\u0437"),r.a.createElement("option",{value:"1"},"\u041f\u043b\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435")),0===this.state.mode&&r.a.createElement("div",null,r.a.createElement(p.d,null,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u0440\u0435\u043c\u044f"),r.a.createElement(p.m,{type:"time"})),0!==this.state.mode&&r.a.createElement("div",null,r.a.createElement(p.i,{title:"\u0414\u0435\u043d\u044c \u043d\u0435\u0434\u0435\u043b\u0438"},r.a.createElement(p.d,{asideContent:r.a.createElement(p.A,null)},"\u041f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a"),r.a.createElement(p.d,{asideContent:r.a.createElement(p.A,null)},"\u0412\u0442\u043e\u0440\u043d\u0438\u043a"),r.a.createElement(p.d,{asideContent:r.a.createElement(p.A,null)},"\u0421\u0440\u0435\u0434\u0430"),r.a.createElement(p.d,{asideContent:r.a.createElement(p.A,null)},"\u0427\u0435\u0442\u0432\u0435\u0440\u0433"),r.a.createElement(p.d,{asideContent:r.a.createElement(p.A,null)},"\u041f\u044f\u0442\u043d\u0438\u0446\u0430"),r.a.createElement(p.d,{asideContent:r.a.createElement(p.A,null)},"\u0421\u0443\u0431\u0431\u043e\u0442\u0430"),r.a.createElement(p.d,{asideContent:r.a.createElement(p.A,null)},"\u0412\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435")),r.a.createElement(p.i,{title:"\u0432\u0440\u0435\u043c\u044f"},r.a.createElement(p.m,{type:"time"})))))},r.a.createElement(p.t,{id:"mainBag"},r.a.createElement(p.v,{onRefresh:this.onRefresh,isFetching:this.state.fetching},r.a.createElement(p.u,{left:r.a.createElement(p.j,{onClick:this.props.back},Object(p.G)()===p.l?r.a.createElement(T.a,null):r.a.createElement(w.a,null))},"\u041a\u043e\u0440\u0437\u0438\u043d\u0430"),r.a.createElement(p.i,{title:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0437\u0430\u043a\u0430\u0437\u0430"},r.a.createElement(p.d,{description:"\u041f\u0440\u0435\u0434\u043f\u043e\u043b\u0430\u0433\u0430\u0435\u043c\u043e\u0435 \u0432\u0440\u0435\u043c\u044f \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u0437\u0430\u043a\u0430\u0437\u0430"},"12:03"),r.a.createElement(p.c,{onClick:function(){return e.setState({activeModal:"editDetailOrder"})},size:"xl"},"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c")),r.a.createElement(p.i,{title:"\u0422\u043e\u0432\u0430\u0440\u044b"},r.a.createElement(p.n,null,this.state.items&&this.state.items.length>0&&this.state.items.map(function(e,t){return r.a.createElement(p.d,{before:r.a.createElement(p.b,{size:64,src:R+e.menu_item.photo_url}),description:e.menu_item.description},e.menu_item.name)}))),r.a.createElement("div",{style:{height:"50px",width:"100%"}}),r.a.createElement(p.g,{vertical:"bottom"},r.a.createElement(p.D,null,r.a.createElement(p.E,{onClick:this.pay},"\u041e\u043f\u043b\u0430\u0442\u0438\u0442\u044c: "+String(this.state.price)+" \u0440\u0443\u0431"))))))}}]),t}(r.a.Component),L=(a(252),function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(d.a)(this,Object(h.a)(t).call(this))).getRestsID=function(){for(var t=String(e.props.restsID[0]),a=1;a<e.props.restsID.length;a++)t+=","+String(e.props.restsID[a]);return t},e.addToCart=function(t){var a=t.id,n=t.name;fetch(R+"/api/v1/cart/push?menu_item_id="+String(a),{method:"GET",headers:{"Povysh-Token":localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){t.is_saved&&e.openBase(n)})},e.openBase=function(t){e.state.snackbar||e.setState({snackbar:r.a.createElement(p.z,{layout:"vertical",onClose:function(){return e.setState({snackbar:null})},before:r.a.createElement(p.b,{size:24},r.a.createElement(G.a,{fill:"#fff",width:14,height:14}))},t+" \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443")})},e.clearBag=function(){fetch(R+"/api/v1/cart/clean",{method:"GET",headers:{"Povysh-Token":localStorage.getItem("token")}}),e.setState({bag:!1})},e.state={activePanel:"mainMenu",categories:[],items:[],currentCategory:-1,snackbar:null,bag:!1},e.openBase=e.openBase.bind(Object(g.a)(Object(g.a)(e))),e}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch(R+"/api/v1/places/food?restaurant_id="+this.getRestsID(),{method:"GET",headers:{"Povysh-Token":localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){try{e.setState({items:t});var a=[],n=[];e.state.items.map(function(e){console.log(e.menu_category),-1===n.indexOf(e.menu_category.id)&&(a.push(e.menu_category),n.push(e.menu_category.id))}),e.setState({categories:a}),e.state.categories&&e.state.categories.length>0&&e.setState({currentCategory:e.state.categories[0].id})}catch(r){}}),fetch(R+"/api/v1/cart/view",{method:"GET",headers:{"Povysh-Token":localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){t.length>0&&-1===e.props.restsID.indexOf(t[0].menu_item.restaraunt_id)&&e.setState({bag:!0})})}},{key:"render",value:function(){var e=this;return this.state.bag?r.a.createElement(p.t,{id:"mainError"},r.a.createElement("div",{style:{height:"50px"}}),r.a.createElement("p",null,"\u0423 \u0432\u0430\u0441 \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0435 \u0447\u0442\u043e-\u0442\u043e \u0435\u0441\u0442\u044c, \u043e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u0435\u0451 \u0438 \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c?"),r.a.createElement(p.c,{onClick:this.clearBag,size:"xl"},"\u0414\u0430"),r.a.createElement("p",null),r.a.createElement(p.c,{onClick:function(){return e.setState({bag:!1,activePanel:"bag"})},size:"xl"},"\u041d\u0435\u0442, \u043f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443")):"bag"===this.state.activePanel?r.a.createElement(B,{id:this.props.id,trackingOrder:this.props.trackingOrder,back:function(){return e.setState({activePanel:"mainMenu"})}}):r.a.createElement(p.F,{id:this.props.id,activePanel:this.state.activePanel},r.a.createElement(p.t,{id:"mainMenu"},r.a.createElement(p.u,{left:r.a.createElement(p.j,{onClick:this.props.back},Object(p.G)()===p.l?r.a.createElement(T.a,null):r.a.createElement(w.a,null))},"\u041c\u0435\u043d\u044e"),r.a.createElement(p.D,{type:"buttons"},r.a.createElement(p.k,null,this.state.categories.length>0&&this.state.categories.map(function(t,a){return r.a.createElement(p.E,{key:a,onClick:function(){return e.setState({currentCategory:t.id})},selected:e.state.currentCategory===t.id,style:{marginLeft:"10px"}},t.name)}))),r.a.createElement(p.n,null,this.state.items&&this.state.items.length>0&&this.state.items.map(function(t,a){return t.menu_category.id!==e.state.currentCategory?null:r.a.createElement(p.d,{before:r.a.createElement(p.b,{src:R+t.photo_url}),description:t.description,asideContent:r.a.createElement(p.c,{onClick:function(){e.addToCart({id:t.id,name:t.name})},style:{width:"80px"}},String(t.price)+" \u0440\u0443\u0431")},t.name)})),r.a.createElement(p.g,{vertical:"bottom"},r.a.createElement(p.D,null,r.a.createElement(p.E,{onClick:function(){e.setState({activePanel:"bag"})}},"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043a \u043a\u043e\u0440\u0437\u0438\u043d\u0435"))),this.state.snackbar))}}]),t}(r.a.Component)),F=(a(336),function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(d.a)(this,Object(h.a)(t).call(this))).updateArrray=function(){var t=[];e.props.rests.map(function(){t.push(!1)}),console.log(e.props.rests),e.setState({checked:t})},e.state={checked:[],activePanel:"mainSelectRest",restsID:[]},e.updateArrray=e.updateArrray.bind(Object(g.a)(Object(g.a)(e))),e}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=[];console.log(this.props.rests),this.props.rests.map(function(){e.push(!1)}),this.setState({checked:e})}},{key:"render",value:function(){var e=this;return console.log(this.props.rests),"menu"===this.state.activePanel?r.a.createElement(L,{id:this.props.id,trackingOrder:this.props.trackingOrder,restsID:this.state.restsID,back:function(){e.setState({activePanel:"mainSelectRest"}),e.updateArrray()}}):r.a.createElement(p.F,{id:this.props.id,activePanel:"mainSelectRest"},r.a.createElement(p.t,{id:"mainSelectRest"},r.a.createElement(p.u,{left:r.a.createElement(p.j,{onClick:this.props.back},Object(p.G)()===p.l?r.a.createElement(T.a,null):r.a.createElement(w.a,null))},"\u0412\u044b\u0431\u043e\u0440 \u0440\u0435\u0441\u0442\u043e\u0440\u0430\u043d\u0430"),r.a.createElement(p.n,null,this.props.rests.map(function(t,a){return r.a.createElement(p.d,{selectable:!0,onClick:function(){var t=e.state.checked;t[a]=!t[a],e.setState({checked:t})}},t.name)})),r.a.createElement(p.g,{vertical:"bottom"},r.a.createElement(p.c,{size:"xl",onClick:function(){var t=[];e.state.checked.map(function(a,n){a&&t.push(e.props.rests[n].id)}),e.setState({restsID:t,activePanel:"menu"})}},"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c"))))}}]),t}(r.a.Component)),U=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).restaurants=[{coord:[55.7,37.6],code:0,id:12345},{coord:[55.7,37.61],code:1,id:82936},{coord:[55.7,37.62],code:2,id:12761},{coord:[55.5,37.6],code:0,id:18235},{coord:[55.8,37.31],code:1,id:11813},{coord:[55.5,36.92],code:2,id:16381},{coord:[55.9,35.6],code:0,id:12936}],a.map=null,a.rest=[{name:"Macdonalds",id:0,url:"https://www.pinclipart.com/picdir/middle/113-1137531_mcdonalds-logo-transparent-png-mcdonalds-logo-png-clipart.png"},{name:"KFC",id:1,url:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRjI-yxfVTMbNT6ogrdOVoKeaL3UG5zbtgWLWPZqtBs8yGJbWx9"},{name:"BurgerKing",id:2,url:"https://cdn.imgbin.com/12/7/6/imgbin-hamburger-whopper-french-fries-burger-king-chicken-sandwich-burger-king-kGm4a8Unj0yht3gTpGYpkHedg.jpg"}],a.foodCourts=[{coord:[56,37.6],restaurants:[0,1,2],id:1243},{coord:[56.2,37.6],restaurants:[0,1,2],id:4357}],a.onBoundsChange=function(){try{a.setState({map:{center:a.map.getCenter(),zoom:a.map.getZoom()}})}catch(e){}},a.onKeyPressed=function(e){console.log(e),"Enter"===e.key&&"block"===a.state.displayList&&(console.log("hi"),a.setState({displayMap:"block",displayList:"none"}))},a.getIdRestsOnFoodCourt=function(e){var t=[];return a.state.foodCourts.map(function(a){a.id===e&&a.restaraunts.map(function(e){t.push(e.id)})}),t},a.state={activePanel:"map",restaurants:a.restaurants,map:{center:[56,37.6],zoom:14},id:e.id,mode:"all",contextOpened:!1,switchRest:[!0,!0,!0],rest:a.rest,foodCourts:[],go:a.props.go,modals:{activeModal:null,modalHistory:[],data:{type:null,id:null,title:null,rests:[]}},search:"",displayMap:"block",displayList:"none",restrictMapArea:[[0,0],[60,60]],rests:[],filters:[],cuisine:[{id:1,checked:!0},{id:2,checked:!0},{id:3,checked:!0}],price_tag:[!0,!0,!0,!0]},a.switchClick=a.switchClick.bind(Object(g.a)(Object(g.a)(a))),a.openModal=a.openModal.bind(Object(g.a)(Object(g.a)(a))),a.modalBack=function(){a.setActiveModal(a.state.modals.modalHistory[a.state.modals.modalHistory.length-2])},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("mapState");console.log(t);var a=[59.9339453,30.302315699999994];if(c.a.sendPromise("VKWebAppGetGeodata").then(function(t){console.log(t),a=[t.lat,t.long],e.setState({map:{center:a,zoom:"13"}})}),null!==t){var n=(r=JSON.parse(t)).switchRest;null===r.map?(console.log(n),r={map:{center:a,switchRest:n}},this.setState(r)):this.setState(r)}else{console.log("elese");var r={map:{center:a,zoom:14}};this.setState(r)}console.log(localStorage.getItem("token")),fetch(R+"/api/v1/utilities/bounds?lat="+String(a[0])+"&lon="+String(a[1]),{method:"GET",headers:{"Povysh-Token":localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){try{var a=t.bounds;e.setState({restrictMapArea:[[a[0],a[1]],[a[2],a[3]]]})}catch(n){}}),fetch(R+"/api/v1/places/around?lat="+String(a[0])+"&lon="+String(a[1])+"&radius=10",{method:"GET",headers:{"Povysh-Token":localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){try{var a=t;e.setState({rests:a})}catch(n){}}),fetch(R+"/api/v1/utilities/filters",{method:"GET",headers:{"Povysh-Token":localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){try{e.setState({filters:t})}catch(a){}}),fetch(R+"/api/v1/places/footcourts_around?lat="+String(a[0])+"&lon="+String(a[1])+"&radius=10",{method:"GET",headers:{"Povysh-Token":localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){try{e.setState({foodCourts:t})}catch(a){}})}},{key:"componentDidUpdate",value:function(){var e={map:this.state.map,switchRest:this.state.switchRest};localStorage.setItem("mapState",JSON.stringify(e))}},{key:"switchClick",value:function(e){var t=Number(e.currentTarget.dataset.mode),a=this.state.switchRest;a[t]=!a[t],this.setState({switchRest:a}),console.log(this.state)}},{key:"openModal",value:function(e){console.log(e),this.setState({modals:{data:e,activeModal:e.type}})}},{key:"setActiveModal",value:function(e){e=e||null,this.setState({modals:{activeModal:e,data:this.state.modals.data}})}},{key:"render",value:function(){var e=this;console.log(this.state);var t=r.a.createElement(p.s,{activeModal:this.state.modals.activeModal},r.a.createElement(p.p,{id:"restModalCard",onClose:function(){return e.setActiveModal(null)},title:this.state.modals.data.title,caption:String(this.state.modals.data.address),actions:[{title:"\u041c\u0435\u043d\u044e",type:"primary",action:function(){e.setActiveModal(null),e.setState({activePanel:"menu"})}}]},r.a.createElement("p",null,this.state.modals.data.description)),r.a.createElement(p.p,{id:"foodcourtModalCard",onClose:function(){return e.setActiveModal(null)},title:this.state.modals.data.title,caption:String(this.state.modals.data.address),actions:[{title:"\u041c\u0435\u043d\u044e",type:"primary",action:function(){e.setActiveModal(null),e.setState({activePanel:"selectRest"})}}]},r.a.createElement("p",null,this.state.modals.data.description)),r.a.createElement(p.q,{id:"filter",onClose:function(){return e.setActiveModal(null)},header:r.a.createElement(p.r,{right:r.a.createElement(p.j,{onClick:function(){return e.setActiveModal(null)}},Object(p.G)()===p.l?"\u0413\u043e\u0442\u043e\u0432\u043e":r.a.createElement(x.a,null))},"\u0424\u0438\u043b\u044c\u0442\u0440\u044b")},this.state.filters&&this.state.filters.cuisine&&r.a.createElement(p.i,{title:"\u041a\u0443\u0445\u043d\u044f"},r.a.createElement(p.n,null,this.state.filters.cuisine.items&&this.state.filters.cuisine.items.length>0&&this.state.filters.cuisine.items.map(function(t,a){return e.state.cuisine[t.id-1].checked?r.a.createElement(p.d,{key:a,defaultChecked:!0,asideContent:r.a.createElement(p.A,{defaultChecked:!0,onClick:function(){var a=e.state.cuisine;a[t.id-1].checked=!a[t.id-1].checked,e.setState({cuisine:a})}})},t.name):r.a.createElement(p.d,{key:a,asideContent:r.a.createElement(p.A,{onClick:function(){var a=e.state.cuisine;a[t.id-1].checked=!a[t.id-1].checked,e.setState({cuisine:a})}})},t.name)}))),this.state.filters&&this.state.filters.price_tag&&r.a.createElement(p.i,{title:"\u0426\u0435\u043d\u043e\u0432\u043e\u0439 \u0434\u0438\u0430\u043f\u0430\u0437\u043e\u043d"},r.a.createElement(p.n,null,this.state.filters.price_tag.items&&this.state.filters.price_tag.items.length>0&&this.state.filters.price_tag.items.map(function(t,a){return e.state.price_tag[a]?r.a.createElement(p.d,{key:a,defaultChecked:!0,asideContent:r.a.createElement(p.A,{defaultChecked:!0,onClick:function(){var t=e.state.price_tag;t[a]=!t[a],e.setState({price_tag:t})}})},String(t[0])+"-"+String(t[1])):r.a.createElement(p.d,{key:a,asideContent:r.a.createElement(p.A,{onClick:function(){var t=e.state.price_tag;t[a]=!t[a],e.setState({price_tag:t})}})},String(t[0])+"-"+String(t[1]))})))));return"menu"===this.state.activePanel?r.a.createElement(L,{id:"menu",trackingOrder:this.props.trackingOrder,restsID:[this.state.modals.data.id],back:function(){return e.setState({activePanel:"map"})}}):"selectRest"===this.state.activePanel?r.a.createElement(F,{id:"selectRest",trackingOrder:this.props.trackingOrder,foodCourtID:this.state.modals.data.id,rests:this.state.modals.data.rests,back:function(){return e.setState({activePanel:"map"})}}):r.a.createElement(p.F,{header:Object(p.G)()===p.l,activePanel:this.state.activePanel,modal:t},r.a.createElement(p.t,{id:"map",style:{overflow:"hidden"}},Object(p.G)()===p.l&&r.a.createElement(p.u,null,r.a.createElement(p.x,{id:"search",theme:"header",value:this.state.search,onChange:function(t){return e.setState({search:t})},onFocus:function(){return e.setState({displayMap:"none",displayList:"block"})},onBlur:function(){return e.setState({displayMap:"block",displayList:"none"})},onKeyDown:this.onKeyPressed,tabIndex:"0"})),Object(p.G)()!==p.l&&r.a.createElement(p.x,{id:"search",value:this.state.search,onChange:function(t){return e.setState({search:t})},onFocus:function(){return e.setState({displayMap:"none",displayList:"block"})},onBlur:function(){return e.setState({displayMap:"block",displayList:"none"})},onKeyDown:this.onKeyPressed,tabIndex:"0"}),r.a.createElement("div",{style:{display:this.state.displayList}},r.a.createElement(p.n,null,this.state.rests&&this.state.rests.length>0&&this.state.rests.map(function(t,a){var n=t.name.toLowerCase(),i=e.state.search.toLowerCase();return-1===n.indexOf(i)?null:r.a.createElement(p.d,{key:a,expandable:!0,onClick:function(){console.log(t.latitude),console.log(t.longitude),e.setState({map:{center:[t.latitude,t.longitude],zoom:14}})}},t.name)}))),r.a.createElement("div",null,r.a.createElement(_.d,null,r.a.createElement(_.b,{height:"100vh",width:"100%",state:{center:this.state.map.center,zoom:this.state.map.zoom},options:{restrictMapArea:this.state.restrictMapArea},instanceRef:function(t){return e.map=t},onBoundsChange:this.onBoundsChange},r.a.createElement(_.a,{options:{preset:"islands#invertedVioletClusterIcons"}},this.state.rests&&this.state.rests.length>0&&this.state.rests.map(function(t,a){return e.state.cuisine[t.cuisine.id-1].checked&&e.state.price_tag[t.price_rating]?-1===t.name.indexOf(e.state.search)?null:r.a.createElement(_.c,{key:a,onClick:function(){e.openModal({type:"restModalCard",title:t.name,id:t.id,address:t.address,description:t.description,rests:[]})},geometry:[t.latitude,t.longitude],properties:{iconContent:t.name[0]},options:{preset:"islands#orangeIcon"}}):null}),this.state.foodCourts&&this.state.foodCourts.length>0&&this.state.foodCourts.map(function(t,a){return e.state.price_tag[t.price_rating]?r.a.createElement(_.c,{key:a,onClick:function(){e.openModal({type:"foodcourtModalCard",title:t.name,id:t.id,address:t.address,description:t.description,rests:t.restaraunts})},geometry:[t.latitude,t.longitude],properties:{iconContent:t.restaraunts.length},options:{preset:"islands#orangeIcon"}}):null})))),r.a.createElement("div",{style:{position:"fixed",bottom:"50px",right:"10px"}},r.a.createElement("img",{src:"https://vk.com/images/stickers/94/512.png",style:{height:"75px"},onClick:function(){return e.setActiveModal("filter")}})))))}}]),t}(r.a.Component),z=a(171),K=a.n(z),N=(a(155),function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(d.a)(this,Object(h.a)(t).call(this))).testArray=[{user:{name:"persik1",id:1,src:"https://vk.com/images/stickers/94/512.png"}},{user:{name:"persik2",id:2,src:"https://vk.com/images/stickers/49/512.png"}},{user:{name:"persik3",id:3,src:"http://vkclub.su/_data/stickers/persik/sticker_vk_persik_002.png"}},{user:{name:"persik4",id:4,src:"https://vk.com/images/stickers/73/512.png"}},{user:{name:"persik5",id:5,src:"https://vk.com/images/stickers/75/512.png"}},{user:{name:"persik6",id:6,src:"https://s.tcdn.co/fdb/2c3/fdb2c3d5-ae19-3b60-8ffc-7b3b8099cfe5/6.png"}},{user:{name:"persik7",id:7,src:"http://vkclub.su/_data/stickers/persik/sticker_vk_persik_006.png"}},{user:{name:"persik8",id:8,src:"http://vkclub.su/_data/stickers/persik/sticker_vk_persik_006.png"}}],e.getPeople=function(){fetch(R+"/api/v1/matcher/queue",{method:"GET",headers:{"Povysh-Token":localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){console.log(t),e.setState({people:t,first:!1,activePanel:"tinderroot"})})},e.sendNewProfile=function(t){fetch(R+"/api/v1/matcher/set_preference?looking_for="+t,{method:"GET",headers:{"Povysh-Token":localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){console.log(t),e.setState({first:!1}),e.getPeople()})},e.onClickLike=function(){var t=e.state.people;0!==t.length&&(fetch(R+"/api/v1/matcher/commit?action=like&matchee_id="+String(t[0].id),{method:"GET",headers:{"Povysh-Token":localStorage.getItem("token")}}),t.splice(0,1),e.setState({people:t}))},e.onClickNoLike=function(){var t=e.state.people;0!==t.length&&(fetch(R+"/api/v1/matcher/commit?action=dislike&matchee_id="+String(t[0].id),{method:"GET",headers:{"Povysh-Token":localStorage.getItem("token")}}),t.splice(0,1),e.setState({people:t}))},e.state={activeModal:"modalRoot",first:!0,sex:"0",people:[],currentIndex:0,activePanel:"tinderroot"},e.getPeople=e.getPeople.bind(Object(g.a)(Object(g.a)(e))),e}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch(R+"/api/v1/matcher/profile",{method:"GET",headers:{"Povysh-Token":localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){null===t?e.setState({first:!0,activePanel:"mainfirst"}):e.getPeople()})}},{key:"render",value:function(){var e=this;return console.log(this.state),console.log(this.state),r.a.createElement(p.F,{id:"root",activePanel:this.state.activePanel},r.a.createElement(p.t,{id:"mainfirst"},r.a.createElement(p.u,null,"\u0424\u0443\u0434-\u0434\u0435\u0439\u0442\u0438\u043d\u0433"),r.a.createElement("p",null,"\u041d\u0430\u0439\u0434\u0438\u0442\u0435 \u0441\u0435\u0431\u0435 \u0447\u0435\u043b\u043e\u0432\u0435\u043a\u0430, \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0440\u0430\u0437\u0434\u0435\u043b\u044f\u0435\u0442 \u0432\u0430\u0448\u0438 \u043f\u0440\u0435\u0434\u043f\u043e\u0447\u0442\u0435\u043d\u0438\u044f \u0432 \u0435\u0434\u0435."),r.a.createElement("p",null,"\u041f\u0440\u043e\u0432\u043e\u0434\u0438\u0442\u0435 \u0432\u043c\u0435\u0441\u0442\u0435 \u0432\u0440\u0435\u043c\u044f \u0437\u0430 \u043b\u044e\u0431\u0438\u043c\u044b\u043c\u0438 \u0431\u043b\u044e\u0434\u0430\u043c\u0438."),r.a.createElement("p",null,"\u042f \u0445\u043e\u0447\u0443 \u043d\u0430\u0439\u0442\u0438 \u0441\u0435\u0431\u0435"),r.a.createElement(p.y,{onChange:function(t){return e.setState({sex:t.target.value})}},r.a.createElement("option",{value:"0"},"\u041f\u0430\u0440\u043d\u044f"),r.a.createElement("option",{value:"1"},"\u0414\u0435\u0432\u0443\u0448\u043a\u0443")),r.a.createElement(p.g,{vertical:"bottom"},r.a.createElement(p.D,null,r.a.createElement(p.E,{onClick:function(){e.sendNewProfile(e.state.sex)}},"\u041d\u0430\u0447\u0430\u0442\u044c")))),r.a.createElement(p.t,{id:"tinderroot"},r.a.createElement(p.u,null,"Tinder"),r.a.createElement("div",{style:{display:"flex",flexDirection:"column",height:"100vh",alignItems:"center"}},this.state.people&&this.state.people.length>0&&r.a.createElement("img",{style:{height:"50%"},src:this.state.people[0].user.photo_url})),console.log(this.state),r.a.createElement(p.g,{vertical:"bottom"},r.a.createElement(p.D,null,r.a.createElement(p.E,{onClick:this.onClickNoLike},r.a.createElement(K.a,{width:28,height:28})),r.a.createElement(p.E,null,this.state.people&&this.state.people.length>0&&r.a.createElement("h1",null,this.state.people[0].user.name)),r.a.createElement(p.E,{onClick:this.onClickLike},r.a.createElement(y.a,{width:28,height:28}))))))}}]),t}(r.a.Component)),V=a(98),W=a.n(V),q=a(172),H=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(d.a)(this,Object(h.a)(t).call(this))).checkNullBag=function(){return fetch(R+"/api/v1/cart/view",{method:"GET",headers:{"Povysh-Token":localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(e){return 0!==e.length})},e.addToBagItems=function(){var t=e.checkNullBag();console.log(t),t.value||(e.state.order.menu_item.map(function(e,t){var a=e.menu_item.id;fetch(R+"/api/v1/cart/push?menu_item_id="+String(a),{method:"GET",headers:{"Povysh-Token":localStorage.getItem("token")}})}),e.setState({activePanel:"bag"}))},e.state={order:null,isLoaded:!1,bag:!1,activePanel:"root"},e}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch(R+"/api/v1/order/detailed?id="+String(this.props.orderID),{method:"GET",headers:{"Povysh-Token":localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){e.setState({order:t,isLoaded:!0})})}},{key:"render",value:function(){var e=this;return console.log(this.props),"bag"===this.state.activePanel?r.a.createElement(B,{id:this.props.id,trackingOrder:function(){},back:function(){return e.setState({activePanel:"root"})}}):this.state.isLoaded?r.a.createElement(p.F,{id:this.props.id,activePanel:"detailorder"},r.a.createElement(p.t,{id:"detailorder"},r.a.createElement(p.u,{left:r.a.createElement(p.j,{onClick:function(){console.log("clickkkkkkk"),e.props.back()}},Object(p.G)()===p.l?r.a.createElement(T.a,null):r.a.createElement(w.a,null))},"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u0430"),r.a.createElement(p.i,{title:"\u041e\u0441\u043d\u043e\u0432\u043d\u044b\u0435 \u0434\u0435\u0442\u0430\u043b\u0438 \u0437\u0430\u043a\u0430\u0437\u0430"},r.a.createElement(p.d,{description:this.state.order.created_at},"\u0414\u0430\u0442\u0430 \u0438 \u0432\u0440\u0435\u043c\u044f \u0437\u0430\u043a\u0430\u0437\u0430"),r.a.createElement(p.d,{description:this.state.order.tracking},"\u041d\u043e\u043c\u0435\u0440 \u043e\u0442\u0441\u043b\u0435\u0436\u0438\u0432\u0430\u043d\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u0430"),r.a.createElement(p.d,{description:this.state.order.status},"\u0421\u0442\u0430\u0442\u0443\u0441 \u0437\u0430\u043a\u0430\u0437\u0430")),0===this.state.order.status&&r.a.createElement(p.i,{title:"\u041e\u0442\u0441\u043b\u0435\u0436\u0438\u0432\u0430\u043d\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u0430"}),r.a.createElement(p.i,{title:"\u0417\u0430\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0435 \u0442\u043e\u0432\u0430\u0440\u044b"},r.a.createElement(p.n,null,this.state.order.menu_item&&this.state.order.menu_item.length>0&&this.state.order.menu_item.map(function(e,t){return r.a.createElement(p.d,{before:r.a.createElement(p.b,{src:R+e.menu_item.photo_url}),description:e.menu_item.description,asideContent:r.a.createElement(p.c,{style:{width:"80px"}},String(e.menu_item.price)+" \u0440\u0443\u0431")},e.menu_item.name)}))),r.a.createElement(p.c,{onClick:this.addToBagItems,size:"xl"},"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"))):r.a.createElement(p.F,{id:this.props.id,activePanel:"detailorder"},r.a.createElement(p.t,{id:"detailorder"},r.a.createElement(p.u,{left:r.a.createElement(p.j,{onClick:this.props.back},Object(p.G)()===p.l?r.a.createElement(T.a,null):r.a.createElement(w.a,null))},"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0437\u0430\u043a\u0430\u0437\u0430")))}}]),t}(r.a.Component),J=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(d.a)(this,Object(h.a)(t).call(this))).onRefresh=function(){e.setState({fetching:!0}),fetch(R+"/api/v1/users/orders",{mathod:"GET",headers:{"Povysh-Token":localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){e.setState({data:t,fetching:!1})})},e.state={activePanel:"mainorder",count:0,coord:"",data:[],orderID:-1,fetching:!1},e.tarcking=e.tarcking.bind(Object(g.a)(Object(g.a)(e))),e.onRefresh=e.onRefresh.bind(Object(g.a)(Object(g.a)(e))),e}return Object(m.a)(t,e),Object(u.a)(t,[{key:"tarcking",value:function(){var e=Object(q.a)(W.a.mark(function e(){return W.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=this;this.tarcking(),fetch(R+"/api/v1/users/orders",{mathod:"GET",headers:{"Povysh-Token":localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){e.setState({data:t}),console.log(t)})}},{key:"render",value:function(){var e=this;return console.log("order"),"detailorder"===this.state.activePanel?r.a.createElement(H,{id:"detailorder",orderID:this.state.orderID,back:function(){console.log("lox"),e.setState({activePanel:"mainorder"})}}):r.a.createElement(p.F,{id:this.props.id,activePanel:this.state.activePanel},r.a.createElement(p.t,{id:"mainorder"},r.a.createElement(p.v,{onRefresh:this.onRefresh,isFetching:this.state.fetching},r.a.createElement(p.u,null,"\u041c\u043e\u0438 \u0437\u0430\u043a\u0430\u0437\u044b"),r.a.createElement(p.n,null,this.state.data&&this.state.data.length>0&&this.state.data.map(function(t,a){return r.a.createElement(p.d,{key:a,description:"\u0434\u0430\u0442\u0430 "+t.created_at,onClick:function(){return e.setState({orderID:t.id,activePanel:"detailorder"})}},t.tracking)})))))}}]),t}(r.a.Component),Z=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(d.a)(this,Object(h.a)(t).call(this))).myrests=[],e.state={rests:[],foodCourts:[],activePanel:"fastroot",restsID:[],myrests:[]},e}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=[0,0];c.a.sendPromise("VKWebAppGetGeodata").then(function(a){t=[a.lat,a.long],fetch(R+"/api/v1/places/raw_around?lat="+String(t[0])+"&lon="+String(t[1])+"&radius=10",{method:"GET",headers:{"Povysh-Token":localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){e.setState({rests:t.kek})}),fetch(R+"/api/v1/places/footcourts_around?lat="+String(t[0])+"&lon="+String(t[1])+"&radius=1000",{method:"GET",headers:{"Povysh-Token":localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(t){e.setState({foodCourts:t}),console.log(t)})}).catch(function(e){console.log(e)})}},{key:"getRestaraunts",value:function(e){var t=this;return fetch(R+"/api/v1/places/foodcourt_rests?foodcourt_id="+String(e),{method:"GET",headers:{"Povysh-Token":localStorage.getItem("token")}}).then(function(e){return e.json()}).then(function(e){console.log(e),t.myrests=e}),[]}},{key:"render",value:function(){var e=this;if(console.log(this.state),"menu"===this.state.activePanel)return r.a.createElement(L,{trackingOrder:this.props.trackingOrder,id:"menu",restsID:[this.state.id],back:function(){return e.setState({activePanel:"fastroot"})}});if("selectRests"===this.state.activePanel){console.log(this.state);this.getRestaraunts(this.state.id);return console.log(this.myrests),r.a.createElement(F,{id:"selectRest",trackingOrder:this.props.trackingOrder,foodCourtID:this.state.id,rests:this.state.myrests,back:function(){return e.setState({activePanel:"fastroot"})}})}return r.a.createElement(p.F,{id:this.props.id,activePanel:"mainFastOrder"},r.a.createElement(p.t,{id:"mainFastOrder"},r.a.createElement(p.u,null,"\u0411\u044b\u0441\u0442\u0440\u044b\u0439 \u0437\u0430\u043a\u0430\u0437"),r.a.createElement(p.i,{title:"\u0411\u043b\u0438\u0436\u0430\u0439\u0448\u0438\u0435 \u0440\u0435\u0441\u0442\u043e\u0440\u0430\u043d\u044b"},r.a.createElement(p.n,null,this.state.rests&&this.state.rests.length>0&&this.state.rests.map(function(t,a){return r.a.createElement(p.d,{onClick:function(){e.setState({activePanel:"menu",id:t.id})}},t.name)}))),r.a.createElement(p.i,{title:"\u0411\u043b\u0438\u0436\u0430\u0439\u0448\u0438\u0435 \u0444\u0443\u0434\u043a\u043e\u0440\u0442\u044b"},r.a.createElement(p.n,null,this.state.foodCourts&&this.state.foodCourts.length>0&&this.state.foodCourts.map(function(t,a){return console.log(t),r.a.createElement(p.d,{onClick:function(){e.setState({activePanel:"selectRests",id:t.id,myrests:t.restaraunts})}},t.name)})))))}}]),t}(r.a.Component),Q=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).flag_name=!1,a.viewChange=function(e){a.setState({activeStory:e})},a.trackingOrder=function(e){console.log(e),a.setState({orderID:e,activeStory:"myorder"})},a.state={id:e.id,activeStory:"map",activePanel:"epic",idRest:null},a.onStoryChange=a.onStoryChange.bind(Object(g.a)(Object(g.a)(a))),a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"onStoryChange",value:function(e){this.setState({activeStory:e.currentTarget.dataset.story})}},{key:"render",value:function(){return r.a.createElement(p.f,{id:"epic",activeStory:this.state.activeStory,tabbar:r.a.createElement(p.B,null,r.a.createElement(p.C,{key:"map",onClick:this.onStoryChange,selected:"map"===this.state.activeStory,"data-story":"map",text:this.flag_name?"Map":null},r.a.createElement(k.a,null)),r.a.createElement(p.C,{key:"quick",onClick:this.onStoryChange,selected:"quick"===this.state.activeStory,"data-story":"quick",text:this.flag_name?"Quick":null},r.a.createElement(E.a,null)," "),r.a.createElement(p.C,{key:"tinder",onClick:this.onStoryChange,selected:"tinder"===this.state.activeStory,"data-story":"tinder",text:this.flag_name?"Tinder":null},r.a.createElement(y.a,null)," "),r.a.createElement(p.C,{key:"myorder",onClick:this.onStoryChange,selected:"myorder"===this.state.activeStory,"data-story":"myorder",text:this.flag_name?"Orders":null},r.a.createElement(C.a,null)))},r.a.createElement(U,{id:"map",viewChange:this.viewChange,trackingOrder:this.trackingOrder}),r.a.createElement(Z,{trackingOrder:this.trackingOrder,id:"quick"}),r.a.createElement(N,{id:"tinder"}),r.a.createElement(J,{id:"myorder",orderID:this.state.orderID}),r.a.createElement(p.F,{id:"settings",activePanel:"settings"},r.a.createElement(p.t,{id:"settings"},r.a.createElement(P,null))))}}]),t}(r.a.Component),Y=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(d.a)(this,Object(h.a)(t).call(this))).state={},e}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(p.F,{header:!1,activePanel:"main"},r.a.createElement(p.t,{id:"main"},r.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center",height:"80vh",alignItems:"center"}},r.a.createElement("div",{style:{height:"100%",width:"100%"}},r.a.createElement(p.h,{slideWidth:"100%",style:{height:"100%",width:"100%"},bullets:"dark"},r.a.createElement("div",null,"Hello"),r.a.createElement("div",null,"Hi"),r.a.createElement("div",null,"H")))),r.a.createElement(p.g,{vertical:"bottom"},r.a.createElement(p.D,null,r.a.createElement(p.E,{onClick:this.props.closeThis},"\u041d\u0430\u0447\u0430\u0442\u044c \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c")))))}}]),t}(r.a.Component),X=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).allertPopout=function(){return a.setState({errorAuth:!0}),r.a.createElement(p.a,{actions:[{title:"Ok",autoclose:!0,style:"default"}],onClose:a.closePopout},r.a.createElement("h2",null,"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438"),r.a.createElement("h2",null,"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u043e\u043f\u044b\u0442\u043a\u0443 \u043f\u043e\u0437\u0436\u0435"))},a.closePopout=function(){console.log("test"),a.setState({popout:r.a.createElement(p.w,null)})},a.state={activePanel:"black",fetchedUser:null,token:null,mytoken:null,popout:r.a.createElement(p.w,null),test:"fail",firstLogin:!1,errorAuth:!1,blackPanel:!0,blackText:""},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"tryGet",value:function(e){var t=this;fetch(R+"/api/v1/users/from_vk_id?id="+e,{method:"GET"}).then(function(e){return e.json()}).then(function(a){localStorage.setItem("token",a.token),t.setState({id:e,mytoken:a.token,activePanel:"start",popout:null,errorAuth:!1,blackPanel:!1,firstLogin:a.is_new})})}},{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("mapState");null!==t&&(t={switchRest:(t=JSON.parse(t)).switchRest,map:null},localStorage.setItem("mapState",JSON.stringify(t))),c.a.sendPromise("VKWebAppGetUserInfo").then(function(t){e.tryGet(t.id)}).catch(function(t){console.log(t),e.setState({errorAuth:!0})})}},{key:"render",value:function(){var e=this;console.log(this.state);try{return this.state.firstLogin?(console.log("firstLogin"),r.a.createElement(Y,{closeThis:function(){return e.setState({firstLogin:!1})}})):this.state.errorAuth?(console.log("errorAuth"),r.a.createElement(p.t,{id:"error"},"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438")):this.state.blackPanel?r.a.createElement(p.F,{id:"blackview",activePanel:"panel",popout:r.a.createElement(p.w,null)},r.a.createElement(p.t,{id:"black"})):r.a.createElement(Q,{id:"start"})}catch(t){return r.a.createElement(p.F,{activePanel:"bug"},r.a.createElement(p.t,{id:"bug"},"\u042d\u0442\u043e \u043d\u0435 \u0431\u0430\u0433, \u044d\u0442\u043e \u0444\u0438\u0447\u0430"))}}}]),t}(r.a.Component),$=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).state={hasError:!1},a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidCatch",value:function(e,t){}},{key:"render",value:function(){return this.state.hasError?r.a.createElement("h1",null,"\u042d\u0442\u043e \u043d\u0435 \u0431\u0430\u0433, \u044d\u0442\u043e \u0444\u0438\u0447\u0430"):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(r.a.Component);c.a.subscribe(function(e){switch(e.detail.type){case"VKWebAppUpdateConfig":var t=document.createAttribute("scheme");t.value=e.detail.data.scheme?e.detail.data.scheme:"client_light",document.body.attributes.setNamedItem(t)}}),c.a.sendPromise("VKWebAppInit").then(function(e){return console.log(e)}).catch(function(e){return console.log(e)}),s.a.render(r.a.createElement($,null,r.a.createElement(X,null)),document.getElementById("root"))}},[[210,1,2]]]);
//# sourceMappingURL=main.390efe40.chunk.js.map